import { initDatabase } from "./database/mongoConnector";
const fs = require("fs");

initDatabase().then(async ({ RestaurantModal }) => {
  RestaurantModal.deleteMany(
    {
      $where: function () {
        const cityKeys = [
          "g187367",
          "g229474",
          "g187294",
          "g198558",
          "g187314",
          "g187278",
          "g198395",
          "g187295",
          "g187323",
          "g187368",
          "g187369",
          "g187370",
          "g227067",
          "g661691",
          "g187348",
          "g187325",
          "g187326",
          "g187398",
          "g1816502",
          "g187329",
          "g187336",
          "g198435",
          "g187404",
          "g187372",
          "g187399",
          "g187374",
          "g187373",
          "g187418",
          "g187349",
          "g187419",
          "g187305",
          "g187375",
          "g187411",
          "g230059",
          "g635854",
          "g187309",
          "g187306",
          "g187337",
          "g187281",
          "g664185",
          "g187376",
          "g187377",
          "g187350",
          "g187331",
          "g187405",
          "g187286",
          "g187351",
          "g187287",
          "g2300059",
          "g198440",
          "g187422",
          "g562782",
          "g187390",
          "g187289",
          "g187342",
          "g641967",
          "g187412",
          "g187391",
          "g229467",
          "g187371",
          "g187378",
          "g229466",
          "g198470",
          "g187400",
          "g187379",
          "g1079870",
          "g187406",
          "g187393",
          "g187392",
          "g187290",
          "g198464",
          "g187380",
          "g187381",
          "g187309",
          "g187382",
          "g187409",
          "g262041",
          "g187310",
          "g187383",
          "g7737281",
          "g187354",
          "g187344",
          "g187311",
          "g187284",
          "g642102",
          "g187330",
          "g187312",
          "g642080",
          "g641949",
          "g187361",
          "g736830",
          "g187355",
          "g198466",
          "g187362",
          "g187387",
          "g198559",
          "g198634",
          "g187291",
          "g642164",
          "g187394",
          "g187292",
          "g187426",
          "g187346",
          "g198509",
          "g187356",
          "g187357",
          "g198632",
          "g187388",
          "g187321",
          "g198477",
        ];

        const inside = (item) => this.url.includes(item);
        return !cityKeys.some(inside);
      },
    },
    console.log
  );
});
